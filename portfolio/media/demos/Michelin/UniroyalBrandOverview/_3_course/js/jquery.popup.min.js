
(function($){$.fn.popup=function(options){var defaults={closePopupBtn:'popupCloseBtn',popupId:'popup',fixed:false,clickIt:false,inSpeed:200,outSpeed:100,popupContent:'',popupClass:'defaultTheme',xOffset:5,yOffset:5,width:250,onShow:null,onHide:null},settings=$.extend({},defaults,options);return this.each(function(){var obj=$(this);if(obj.attr('title')){var popupContent=obj.attr('title');}else{var popupContent=settings.popupContent;}
var buildpopup=function(){$('body').append("<div id='"+settings.popupId+"' class='"+settings.popupClass+"' style='width:"+settings.width+"'><div class='popupContent'>"+popupContent+"</div></div>");if(popupContent&&settings.clickIt){$('#'+settings.popupId).prepend("<a id='"+settings.closePopupBtn+"' href='#' alt='close'></a>");}},positionpopup=function(){$('#'+settings.popupId).css({top:(obj.offset().top-$('#'+settings.popupId).outerHeight()-settings.yOffset)+'px',left:(obj.offset().left+obj.outerWidth()+settings.xOffset)+'px'}).stop().fadeIn(settings.inSpeed,function(){if($.isFunction(settings.onShow)){settings.onShow(obj);}});},removepopup=function(){$('#'+settings.popupId).stop().fadeOut(settings.outSpeed,function(){$(this).remove();if($.isFunction(settings.onHide)){settings.onHide(obj);}});};if(popupContent&&!settings.clickIt){obj.hover(function(){$('#'+settings.popupId).remove();obj.attr({title:''});buildpopup();positionpopup();},function(){removepopup();});}
if(popupContent&&settings.clickIt){obj.click(function(el){$('#'+settings.popupId).remove();obj.attr({title:''});buildpopup();positionpopup();$('#'+settings.closePopupBtn).click(function(){removepopup();return false;});return false;});}
if(!settings.fixed&&!settings.clickIt){obj.mousemove(function(el){$('#'+settings.popupId).css({top:(el.pageY-$('#'+settings.popupId).outerHeight()-settings.yOffset),left:(el.pageX+settings.xOffset)});});}});};})(jQuery);

